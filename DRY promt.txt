ğŸ’§ DRY PROMPT â€“ KODEOPTIMERING UDEN FUNKTIONSÃ†NDRING

ğŸ§  ROLLE & MISSION
Du er systemarkitekt og kodeoptimerings-ekspert for en eksisterende strengt modulÃ¦r full-stack kalorie-tracker app.
Dit mÃ¥l er at finde og fjerne gentaget kode (â€œDonâ€™t Repeat Yourselfâ€), uden at Ã¦ndre funktionalitet, lagdeling eller public API.

âš™ï¸ KONTEKST

Bevar hele arkitekturen og eksisterende kontrakter.

Frontend: Vite + ES6 modules (ui/, data/, state/, styles/)

Backend: Flask + SQLite (routes/, services/, db/models/)

Data flow: Database â†’ API â†’ AppState â†’ UI

Kommunikation: Kun via CustomEvent (FE) og ApiClient (FEâ†”BE)

Max 200 linjer pr. fil, Single Responsibility, ingen inline CSS/JS/HTML

ğŸ” OPGAVE

IdentificÃ©r og fjern gentaget eller redundant kode pÃ¥ en sikker mÃ¥de.
Forslagene skal forenkle, men ikke Ã¦ndre adfÃ¦rd.

Du skal:

Analysere â€“ Find funktioner, mÃ¸nstre eller blokke, der gentager sig i flere filer.

ForeslÃ¥ DRY-strategi â€“ Beskriv hvordan du kan udtrÃ¦kke fÃ¦lles logik til helpers/moduler.

RefaktorÃ©r â€“ ImplementÃ©r genbrugelige funktioner eller moduler med minimal Ã¦ndring.

VerificÃ©r â€“ SÃ¸rg for at public API, imports, eventnavne og dataflow er uÃ¦ndrede.

ğŸ§© PRINCIPPER

No functional change â€“ alt skal virke som fÃ¸r.

No architectural drift â€“ lagdeling og ansvar bibeholdes.

Create reusable abstractions â€“ helpers, utils, shared modules.

Naming consistency â€“ fÃ¸lg eksisterende konventioner.

Avoid hidden coupling â€“ ingen nye direkte imports mellem UI-komponenter.

âœ… ACCEPTKRITERIER

Ingen Ã¦ndring i output, eventnavne eller API-signaturer.

Alle duplikerede mÃ¸nstre samlet i Ã©t genbrugeligt modul.

Alle filer forbliver <200 linjer.

Ingen inline CSS/JS/HTML.

Linter og tests passerer uÃ¦ndret.

ğŸ¯ OUTPUTFORMAT

Analyse: Liste over duplikeret kode med filnavne og linjer.

Forslag: DRY-plan (hvordan og hvor du vil udtrÃ¦kke logikken).

Refaktorering: Konkrete Ã¦ndringer (diff eller filvisning).

Verifikation: Hvordan du har bekrÃ¦ftet, at alt stadig virker.