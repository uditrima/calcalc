# Set correct MIME types for PWA files
<IfModule mod_mime.c>
    AddType application/manifest+json .json
    AddType application/manifest+json .webmanifest
    AddType application/json .json
    AddType text/javascript .js
    AddType application/javascript .js
    AddType text/css .css
    AddType application/x-javascript .js
</IfModule>

# Force correct MIME types for specific files
<FilesMatch "\.(js)$">
    ForceType text/javascript
    Header set Content-Type "text/javascript; charset=utf-8"
</FilesMatch>

<FilesMatch "sw\.js$">
    ForceType text/javascript
    Header set Content-Type "text/javascript; charset=utf-8"
    Header set Service-Worker-Allowed "/"
</FilesMatch>

<FilesMatch "\.(css)$">
    ForceType text/css
    Header set Content-Type "text/css; charset=utf-8"
</FilesMatch>

# Enable compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE application/json
    AddOutputFilterByType DEFLATE application/manifest+json
</IfModule>

# Cache control for PWA files
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType application/manifest+json "access plus 1 week"
    ExpiresByType application/json "access plus 1 week"
    ExpiresByType text/javascript "access plus 1 week"
    ExpiresByType text/css "access plus 1 week"
</IfModule>
