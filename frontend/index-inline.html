<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <title>Kalorie Tracker</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Kalorie Tracker - Spor din daglige kalorieindtag og motion">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Kalorie Tracker">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#1a1a2e">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- Android specific optimizations -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Kalorie Tracker">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">
    
    <!-- Prevent zoom on Android -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- Inline Web App Manifest (to avoid server MIME type issues) -->
    <script type="application/manifest+json" id="app-manifest">
    {
      "name": "Kalorie Tracker",
      "short_name": "Kalorie Tracker",
      "description": "Spor din daglige kalorieindtag og motion",
      "start_url": ".",
      "display": "standalone",
      "background_color": "#1a1a2e",
      "theme_color": "#1a1a2e",
      "orientation": "portrait",
      "scope": ".",
      "lang": "da",
      "icons": [
        {
          "src": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüçé%3C/text%3E%3C/svg%3E",
          "sizes": "192x192",
          "type": "image/svg+xml"
        },
        {
          "src": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüçé%3C/text%3E%3C/svg%3E",
          "sizes": "512x512",
          "type": "image/svg+xml"
        }
      ]
    }
    </script>
    
    <!-- Register inline manifest -->
    <script>
        // Register the inline manifest
        window.addEventListener('load', () => {
            const manifestScript = document.getElementById('app-manifest');
            if (manifestScript) {
                try {
                    const manifestData = JSON.parse(manifestScript.textContent);
                    console.log('Inline manifest loaded:', manifestData);
                    
                    // Update URLs to use current location
                    const currentUrl = window.location.origin + window.location.pathname.replace(/\/[^\/]*$/, '/');
                    manifestData.start_url = currentUrl;
                    manifestData.scope = currentUrl;
                    
                    // Create a blob URL for the manifest
                    const manifestBlob = new Blob([JSON.stringify(manifestData)], {
                        type: 'application/manifest+json'
                    });
                    const manifestUrl = URL.createObjectURL(manifestBlob);
                    
                    // Create and add manifest link
                    const manifestLink = document.createElement('link');
                    manifestLink.rel = 'manifest';
                    manifestLink.href = manifestUrl;
                    document.head.appendChild(manifestLink);
                    
                    console.log('Manifest registered successfully with URL:', currentUrl);
                } catch (error) {
                    console.error('Error parsing inline manifest:', error);
                }
            }
        });
    </script>
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüçé%3C/text%3E%3C/svg%3E">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3Eüçé%3C/text%3E%3C/svg%3E">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/colors.css">
    <link rel="stylesheet" href="styles/theme.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/forms.css">
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/gauge.css">
    <link rel="stylesheet" href="styles/dashboard.css">
    <link rel="stylesheet" href="styles/diary.css">
    <link rel="stylesheet" href="styles/food.css">
    <link rel="stylesheet" href="styles/meal-dropdown.css">
    <link rel="stylesheet" href="styles/add-food.css">
    <link rel="stylesheet" href="styles/add-menu.css">
    <link rel="stylesheet" href="styles/settings.css">
    <link rel="stylesheet" href="styles/edit-profile-page.css">
    <link rel="stylesheet" href="styles/nutrition-goals.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link rel="stylesheet" href="styles/data-tags.css">
    <link rel="stylesheet" href="styles/types.css">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- App will be loaded here -->
        <div style="display: flex; justify-content: center; align-items: center; height: 100vh; color: white; font-family: Inter, sans-serif;">
            <div style="text-align: center;">
                <div style="font-size: 48px; margin-bottom: 20px;">üçé</div>
                <h1>Kalorie Tracker</h1>
                <p>Indl√¶ser app...</p>
                <p style="font-size: 14px; opacity: 0.7;">Hvis denne besked vises l√¶nge, kan der v√¶re problemer med serveren.</p>
            </div>
        </div>
    </div>
    
    <!-- Inline JavaScript to avoid MIME type issues -->
    <script>
        console.log('Loading Kalorie Tracker with inline JavaScript...');
        
        // Basic app initialization
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded, initializing app...');
            
            // Simple fallback app
            const appContainer = document.getElementById('app');
            if (appContainer) {
                appContainer.innerHTML = `
                    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; color: white; font-family: Inter, sans-serif; background: #1a1a2e;">
                        <div style="text-align: center; padding: 20px;">
                            <div style="font-size: 48px; margin-bottom: 20px;">üçé</div>
                            <h1>Kalorie Tracker</h1>
                            <p>PWA er installeret og klar!</p>
                            <p style="font-size: 14px; opacity: 0.7; margin-top: 20px;">
                                Appen k√∏rer nu i standalone mode.<br>
                                For fuld funktionalitet, upload alle filer til serveren.
                            </p>
                        </div>
                    </div>
                `;
            }
        });
    </script>
</body>
</html>
